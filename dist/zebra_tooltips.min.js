!function(t){"use strict";t.Zebra_Tooltips=function(o,e){var i,n,s,a,l={animation_speed:250,animation_offset:20,close_on_click:!0,content:!1,default_position:"above",hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},r=this,_=function(o){var e,l,_,h,c,w,f,m,u,g,T,b,y,Z,v,k=o.data("Zebra_Tooltip");return k.tooltip||(e=t("<div>",{class:"Zebra_Tooltip",css:{opacity:0,display:"block"}}),l=t("<div>",{class:"Zebra_Tooltip_Message",css:{maxWidth:r.settings.max_width}}).html(r.settings.content?r.settings.content:k.content).appendTo(e),_=t("<div>",{class:"Zebra_Tooltip_Arrow"}).appendTo(e),h=t("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(_),t("<div>").appendTo(_),r.settings.keep_visible&&(e.on("mouseleave"+(r.settings.close_on_click?" click":""),function(){p(o)}),e.on("mouseenter",function(){d(o)})),e.appendTo("body"),k.sticky&&l.addClass("Zebra_Tooltip_Has_Close"),c=e.outerWidth(),w=e.outerHeight(),f=h.outerWidth(),m=h.outerHeight(),u=l.outerWidth(),g=l.outerHeight(),k={tooltip:e,tooltip_width:c,tooltip_height:w+m/2,message:l,arrow_container:_,arrow_width:f,arrow_height:m,arrow:h},e.css({width:k.tooltip_width,height:k.tooltip_height}),k.tooltip_width=k.tooltip_width+(l.outerWidth()-u),k.tooltip_height=k.tooltip_height+(l.outerHeight()-g),e.css({width:k.tooltip_width,height:k.tooltip_height,display:"none"}),k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),k.sticky&&!k.close&&(t("<a>",{class:"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();var e=o.data("Zebra_Tooltip");e.sticky=!1,o.data("Zebra_Tooltip",e),p(o)}).appendTo(k.message),k.close=!0,k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),(k.window_resized||k.window_scrolled)&&(T=t(window),k.window_resized&&(i=T.width(),n=T.height(),b=o.offset(),t.extend(k,{element_left:b.left,element_top:b.top,element_width:o.outerWidth(),element_height:o.outerHeight()})),a=T.scrollTop(),s=T.scrollLeft(),y="left"===r.settings.position?k.element_left-k.tooltip_width+k.arrow_width:"right"===r.settings.position?k.element_left+k.element_width-k.arrow_width:k.element_left+(k.element_width-k.tooltip_width)/2,Z=k.element_top-k.tooltip_height,v="left"===r.settings.position?k.tooltip_width-k.arrow_width-k.arrow_width/2:"right"===r.settings.position?k.arrow_width/2:(k.tooltip_width-k.arrow_width)/2,y+k.tooltip_width>i+s&&(v-=i+s-(y+k.tooltip_width)-6,y=i+s-k.tooltip_width-6,v+k.arrow_width>k.tooltip_width-6&&(v=k.tooltip_width-6-k.arrow_width),y+v+k.arrow_width/2<k.element_left&&(v=-1e4)),y<s&&(v-=s-y,y=s+2,v<0&&(v=k.arrow_width/2),y+v+k.arrow_width/2>k.element_left+k.element_width&&(v=-1e4)),k.message.css("margin-top",""),k.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),Z<a||"below"===r.settings.default_position&&k.element_top+k.element_height+r.settings.vertical_offset+k.tooltip_height+k.animation_offset<n+a?(Z=k.element_top+k.element_height-r.settings.vertical_offset,k.animation_offset=Math.abs(k.animation_offset),k.message.css("margin-top",k.arrow_height/2),k.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(k.animation_offset=-Math.abs(k.animation_offset),Z+=r.settings.vertical_offset),k.arrow_container.css("left",v),k.tooltip.css({left:y,top:Z}),t.extend(k,{tooltip_left:y,tooltip_top:Z,arrow_left:v}),k.window_resized=!1,k.window_scrolled=!1,k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),k},d=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.show_timeout),o.muted||(clearTimeout(o.hide_timeout),o.show_timeout=setTimeout(function(){o=_(t),r.settings.onBeforeShow&&"function"==typeof r.settings.onBeforeShow&&!1===r.settings.onBeforeShow(t,o.tooltip)||("block"!==o.tooltip.css("display")&&o.tooltip.css({top:o.tooltip_top+o.animation_offset}),o.tooltip.css("display","block"),o.tooltip.stop(),o.tooltip.animate({top:o.tooltip_top,opacity:r.settings.opacity},r.settings.animation_speed,function(){r.settings.onShow&&"function"==typeof r.settings.onShow&&r.settings.onShow(t,o.tooltip)}))},r.settings.show_delay))},p=function(o){var e=o.data("Zebra_Tooltip");clearTimeout(e.hide_timeout),e.sticky||(clearTimeout(e.show_timeout),e.hide_timeout=setTimeout(function(){if(e.tooltip){if(r.settings.onBeforeHide&&"function"==typeof r.settings.onBeforeHide&&!1===r.settings.onBeforeHide(o,e.tooltip))return;e.close=!1,e.destroy&&(e.muted=!0),o.data("Zebra_Tooltip",e),t("a.Zebra_Tooltip_Close",e.tooltip).remove(),e.tooltip.stop(),e.tooltip.animate({opacity:0,top:e.tooltip_top+e.animation_offset},r.settings.animation_speed,function(){t(this).css("display","none"),r.settings.onHide&&"function"==typeof r.settings.onHide&&r.settings.onHide(o,e.tooltip)})}},r.settings.hide_delay))};r.settings={},r.hide=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),p(o))})},r.show=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!0,i.muted=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),d(o))})},function(){r.settings=t.extend({},l,e),o.each(function(){var o=t(this),e=o.attr("title"),i=o.data("zebra-tooltip");(e&&""!==e||i&&""!==i||void 0!==r.settings.content)&&(o.on({mouseenter:function(){e&&t(this).attr("title",""),d(o)},mouseleave:function(){p(o),e&&t(this).attr("title",e)}}),o.data("Zebra_Tooltip",{tooltip:null,content:i||e||"",window_resized:!0,window_scrolled:!0,show_timeout:null,hide_timeout:null,animation_offset:r.settings.animation_offset,sticky:!1,destroy:!1,muted:!1}),r.settings.prerender&&_(o))}),t(window).on("scroll resize",function(e){o.each(function(){var o=t(this).data("Zebra_Tooltip");o&&("scroll"===e.type?o.window_scrolled=!0:o.window_resized=!0,t(this).data("Zebra_Tooltip",o))})})}()}}($);