!function(t){"use strict";t.Zebra_Tooltips=function(o,e){this.version="2.0.2";var i,n,s,a,l={animation_speed:250,animation_offset:20,close_on_click:!0,content:!1,hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_alignment:"above",vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},r=this,_=function(o){var e,l,_,h,c,f,w,m,g,u,T,b,v,y,Z=o.data("Zebra_Tooltip"),k=t(window);return Z.tooltip||(e=t("<div>",{"class":"Zebra_Tooltip",css:{opacity:0,display:"block"}}),l=t("<div>",{"class":"Zebra_Tooltip_Message",css:{maxWidth:r.settings.max_width}}).html(r.settings.content?r.settings.content:Z.content).appendTo(e),_=t("<div>",{"class":"Zebra_Tooltip_Arrow"}).appendTo(e),h=t("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(_),t("<div>").appendTo(_),r.settings.keep_visible&&(e.on("mouseleave"+(r.settings.close_on_click?" click":""),function(){d(o)}),e.on("mouseenter",function(){p(o)})),e.appendTo("body"),Z.sticky&&l.addClass("Zebra_Tooltip_Has_Close"),c=e.outerWidth(),f=e.outerHeight(),w=h.outerWidth(),m=h.outerHeight(),g=l.outerWidth(),u=l.outerHeight(),Z={tooltip:e,tooltip_width:c,tooltip_height:f+m/2,message:l,arrow_container:_,arrow_width:w,arrow_height:m,arrow:h},e.css({width:Z.tooltip_width,height:Z.tooltip_height}),Z.tooltip_width=Z.tooltip_width+(l.outerWidth()-g),Z.tooltip_height=Z.tooltip_height+(l.outerHeight()-u),e.css({width:Z.tooltip_width,height:Z.tooltip_height,display:"none"}),Z=t.extend(o.data("Zebra_Tooltip"),Z),o.data("Zebra_Tooltip",Z)),Z.sticky&&!Z.close&&(t("<a>",{"class":"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();var e=o.data("Zebra_Tooltip");e.sticky=!1,o.data("Zebra_Tooltip",e),d(o)}).appendTo(Z.message),Z.close=!0,Z=t.extend(o.data("Zebra_Tooltip"),Z),o.data("Zebra_Tooltip",Z)),i=k.width(),n=k.height(),T=o.offset(),t.extend(Z,{element_left:T.left,element_top:T.top,element_width:o.outerWidth(),element_height:o.outerHeight()}),a=k.scrollTop(),s=k.scrollLeft(),b="left"===r.settings.position?Z.element_left-Z.tooltip_width+Z.arrow_width:"right"===r.settings.position?Z.element_left+Z.element_width-Z.arrow_width:Z.element_left+(Z.element_width-Z.tooltip_width)/2,v=Z.element_top-Z.tooltip_height,y="left"===r.settings.position?Z.tooltip_width-Z.arrow_width-Z.arrow_width/2:"right"===r.settings.position?Z.arrow_width/2:(Z.tooltip_width-Z.arrow_width)/2,b+Z.tooltip_width>i+s&&(y-=i+s-(b+Z.tooltip_width)-6,b=i+s-Z.tooltip_width-6,y+Z.arrow_width>Z.tooltip_width-6&&(y=Z.tooltip_width-6-Z.arrow_width),b+y+Z.arrow_width/2<Z.element_left&&(y=-1e4)),b<s&&(y-=s-b,b=s+2,y<0&&(y=Z.arrow_width/2),b+y+Z.arrow_width/2>Z.element_left+Z.element_width&&(y=-1e4)),Z.message.css("margin-top",""),Z.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),v<a||"below"===r.settings.vertical_alignment&&Z.element_top+Z.element_height+r.settings.vertical_offset+Z.tooltip_height+Z.animation_offset<n+a?(v=Z.element_top+Z.element_height-r.settings.vertical_offset,Z.animation_offset=Math.abs(Z.animation_offset),Z.message.css("margin-top",Z.arrow_height/2),Z.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(Z.animation_offset=-Math.abs(Z.animation_offset),v+=r.settings.vertical_offset),Z.arrow_container.css("left",y),Z.tooltip.css({left:b,top:v}),t.extend(Z,{tooltip_left:b,tooltip_top:v,arrow_left:y}),Z=t.extend(o.data("Zebra_Tooltip"),Z),o.data("Zebra_Tooltip",Z),Z},p=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.show_timeout),o.muted||(clearTimeout(o.hide_timeout),o.show_timeout=setTimeout(function(){o=_(t),r.settings.onBeforeShow&&"function"==typeof r.settings.onBeforeShow&&!1===r.settings.onBeforeShow(t,o.tooltip)||("block"!==o.tooltip.css("display")&&o.tooltip.css({top:o.tooltip_top+o.animation_offset}),o.tooltip.css("display","block"),o.tooltip.stop(),o.tooltip.animate({top:o.tooltip_top,opacity:r.settings.opacity},r.settings.animation_speed,function(){r.settings.onShow&&"function"==typeof r.settings.onShow&&r.settings.onShow(t,o.tooltip)}))},r.settings.show_delay))},d=function(o){var e=o.data("Zebra_Tooltip");clearTimeout(e.hide_timeout),e.sticky||(clearTimeout(e.show_timeout),e.hide_timeout=setTimeout(function(){if(e.tooltip){if(r.settings.onBeforeHide&&"function"==typeof r.settings.onBeforeHide&&!1===r.settings.onBeforeHide(o,e.tooltip))return;e.close=!1,e.destroy&&(e.muted=!0),o.data("Zebra_Tooltip",e),t("a.Zebra_Tooltip_Close",e.tooltip).remove(),e.tooltip.stop(),e.tooltip.animate({opacity:0,top:e.tooltip_top+e.animation_offset},r.settings.animation_speed,function(){t(this).css("display","none"),r.settings.onHide&&"function"==typeof r.settings.onHide&&r.settings.onHide(o,e.tooltip)})}},r.settings.hide_delay))};r.settings={},r.hide=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),d(o))})},r.show=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!0,i.muted=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),p(o))})},function(){r.settings=t.extend({},l,e),o.each(function(){var o,e=t(this),i=e.attr("title"),n=e.data();for(o in n)0===o.indexOf("ztt_")&&(o=o.replace(/^ztt\_/,""),undefined!==l[o]&&(r.settings[o]=e.data("ztt_"+o)));i&&(r.settings.content=e.attr("title")),undefined!==r.settings.content&&""!==r.settings.content.trim()&&(e.on({mouseenter:function(){i&&t(this).attr("title",""),p(e)},mouseleave:function(){d(e),i&&t(this).attr("title",i)}}),e.data("Zebra_Tooltip",{tooltip:null,content:r.settings.content,show_timeout:null,hide_timeout:null,animation_offset:r.settings.animation_offset,sticky:!1,destroy:!1,muted:!1}),r.settings.prerender&&_(e))})}()}}($);